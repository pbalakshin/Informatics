\documentclass[14pt, fleqn]{extarticle}
\usepackage[left=2.5cm,right=2.5cm,top=2.5cm,bottom=2.5cm]{geometry}
% \usepackage[left=3cm,right=2.5cm,top=2cm,bottom=2cm]{geometry}

% === ШРИФТЫ И ЯЗЫК ===
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}

% Шрифт Times в тексте как основной
\usepackage{tempora}
% Шрифт Times в формулах как основной
\usepackage[varg, cmbraces, cmintegrals]{newtxmath}

% === ТИПОГРАФИКА ===
\usepackage{indentfirst}
%% Абзацный отступ по ГОСТу - пять букв. Это примерно столько.
% \setlength{\parindent}{1.25cm}
\usepackage{setspace}
\onehalfspacing
\usepackage{microtype}
\usepackage{ulem} %зачёркнутый текст

%% Не используем буллеты.
% \renewcommand\labelitemi{---}

% === ПОДПИСИ ===
% \usepackage[font=normalsize,labelfont=it,textfont=it,justification=centering]{caption}

\usepackage[
    font=normalsize,
    labelfont=normalsize,
    textfont=it,
    singlelinecheck=false,
    labelsep=endash,
    position=top,
    justification=justified
]{caption}
\captionsetup[figure]{position=bottom,justification=centering}
\usepackage{subcaption}

\usepackage{float}
% \floatsetup[figure]{capposition=bottom}
% \floatsetup[table]{capposition=top}

% === ГРАФИКА ===
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{svg}

% === TikZ и PGFPlots ===
\usepackage{tikz}
\usetikzlibrary{graphs}
\usepackage{pgfplots}
\pgfplotsset{compat=1.9}

% === МАТЕМАТИКА ===
\usepackage{amsmath}

% Использовать полужирное начертание для векторов
\let\vec=\mathbf


% === ЛИСТИНГИ КОДА ===
\usepackage{listings} % Deprecated. Use minted instead
\usepackage{minted}

\setminted{
    fontsize=\small,
    frame=single,
    encoding=utf8,
    samepage,
    autogobble,
    tabsize=4
}

\setmintedinline{
    fontsize=\normalsize,
    encoding=utf8,
    breaklines,
    breakafter=-/
}

% Отключение курсива в minted
\usepackage{xpatch}
\xpatchcmd{\mint}{\begingroup}{\begingroup\let\itshape\relax}{}{}
\xpatchcmd{\inputminted}{\begingroup}{\begingroup\let\itshape\relax}{}{}
\xpatchcmd{\mintinline}{\begingroup}{\begingroup\let\itshape\relax}{}{}
\xpatchcmd{\minted}{\VerbatimEnvironment}{\VerbatimEnvironment\let\itshape\relax}{}{}

\newcommand{\code}[2][text]{\mintinline{#1}{#2}}

% === ССЫЛКИ ===
\usepackage[breaklinks]{hyperref}
\usepackage{xurl}
\usepackage{xr} % cross-file references
\usepackage{csquotes}
\usepackage{lastpage}

%% Сноски начинаются с 1 на каждой странице
\usepackage[perpage]{footmisc}

% === СПИСОК И ПЕРЕЧНИ ===
\usepackage{enumitem}
% \setlist{nosep}
% \setlist[itemize]{leftmargin=2cm,labelsep=0.5cm}
% \setlist[enumerate]{leftmargin=1.5cm}

% === Дополнительные пакеты ===
\usepackage{siunitx} % for B/kB/MB etc.

% === ТАБЛИЦЫ ===
\usepackage{longtable}
\usepackage{tabularx}
\usepackage{xltabular}
\usepackage{hhline}
\usepackage{booktabs}
\usepackage{array}
\usepackage{makecell}
\usepackage{multirow}
\usepackage[table]{xcolor}

\renewcommand\theadfont{\normalsize\bfseries}

\newcolumntype{C}{>{\centering\arraybackslash}X}
\renewcommand\tabularxcolumn[1]{m{#1}}% for vertical centering text in X column

%% Многостраничные таблицы в гостовском формате. Аргументы:
%% 1 - имя, по которому ссылаемся
%% 2 - подпись
%% 3 - строка форматирования столбцов (как в tabular)
%% 4 - число столбцов (не осилил вычислить его из значения 3)
%% 5 - заголовки столбцов (первая строчка, которая будет везде повторяться)


\newenvironment{nirtable}[5]{
    \begin{longtable}{#3}
        \caption{#2}\label{#1}
        \\\hline #5 \\\hline \endfirsthead
        \multicolumn{#4}{r}{\normalsize{Продолжение таблицы~\thetable}} \\\hline #5 \\\hline \endhead
}{\end{longtable}}

%% Многостраничные таблицы в гостовском формате (v2). Аргументы:
%% 1 - Ширина таблицы
%% 2 - строка форматирования столбцов (как в tabularx/xltabular)
%% 3 - число столбцов (не осилил вычислить его из значения 2)
%% 4 - подпись
%% 5 - имя, по которому ссылаемся
%% 6 - заголовки столбцов (первая строчка, которая будет везде повторяться)
\newenvironment{nirtabxl}[6]{
    \begin{xltabular}{#1}{#2}
        \caption{#4\label{#5}}
        \\ \hline #6 \\ \hline \endfirsthead
        \multicolumn{#3}{r}{\normalsize{Продолжение таблицы~\thetable}} \\ \hline #6 \\ \hline \endhead
}{\end{xltabular}}

% \newcommand{\innesr}[2][]{\renewcommand*{\arraystretch}{1}\begin{tabular}{>{#1}c}#2\end{tabular}}

% === ЦВЕТА ===
% draw.io cell colors
\definecolor{iogreen}{RGB}{213 232 212}
\definecolor{ioyellow}{RGB}{255, 242, 204}
\definecolor{ioorange}{RGB}{255, 230, 204}
\definecolor{iored}{RGB}{248, 206, 204}

% === TODO заметки ===
\usepackage{todonotes}
\presetkeys{todonotes}{inline,backgroundcolor=yellow}{}
%% Закомментить при дебаге и раскомменить при релизе
%% наличие данной команды убирает все блоки туду с документа
% \presetkeys{todonotes}{disable}{}

% === Форматирование секций ===
\usepackage{titlesec}
\titleformat*{\section}{\large\bfseries}
\titleformat*{\subsection}{\normalsize\bfseries}
\titleformat*{\subsubsection}{\normalsize\bfseries}
% \titleformat*{\paragraph}{\normalsize\bfseries}

\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titleformat*{\subparagraph}{\normalsize\bfseries}

%% === "Тонкая" настройка теховских штрафов при формировании абзацев. ===
\sloppy             % «Будь менее строгим к выравниванию строк»
\binoppenalty=10000 % Запрещает разрыв строки после бинарного оператора (+ - = \times и т.п.).
\relpenalty=10000   % Запрещает разрыв строки после знаков отношений
\clubpenalty=10000  % Запрещает висячие строки в начале абзаца
\widowpenalty=10000 % Запрещает висячие строки в конце абзаца

% === Библиография (biblatex + biber) ===
\input{preambule/bibliography}
\addbibresource{bibliography.bib}

\providecommand\phantomsection{}

% === Команды для примеров и заданий ===
\newcommand{\example}[1]{\par\bigskip\noindent\emph{\textbf{Пример #1:}} }
\newcommand{\task}{\par\smallskip\noindent\emph{\textit{Задание:}} }
\newcommand{\solution}{\par\smallskip\noindent\emph{\textit{Решение:}} }
\newcommand{\answer}{\par\smallskip\noindent\emph{\textit{Ответ:}} }
\newcommand{\explain}{\par\smallskip\noindent\emph{\textit{Пояснение:}} }

% === Путь для картинок ===
\graphicspath{ {./images/} }

% === Нумерация страниц ===
\pagestyle{plain}
\setcounter{page}{2}
\begin{document}
\nocite{*}

% \todo{Если видно это сообщение - раскомментировать строку в main.tex}
\include{0_title_page} % обложка, не идёт в счёт страниц
\include{1_first_page.tex}
\include{2_description}

% Вставка оглавления, начиная с 3 страницы
\setcounter{page}{3}
\addtocontents{toc}{\protect\sloppy}
\tableofcontents

\include{src/00_about_the_course}
\include{src/01_theory}
\include{src/02_data_measurement_units}
\include{src/03_notation_systems}
\include{src/04_limited_arithmetics}
% \include{_OLD_Informatics/chapter4_old} % Повторение 01_theory
\include{src/05_data_compression}
\include{src/06_error_correcting_coding}    
\include{src/07_boolean_algebra} 
\include{src/08_software} 
\include{src/09_machine} 
\include{src/10_memory}
\include{src/11_osi} 

\include{4_conclusion}

\addbibliography{Список использованных и рекомендованных источников}

\include{5_last_page}
\include{6_back_page} %задняя страница обложки, не идёт в счёт страниц

\end{document}
